(function(a){if(typeof exports==="object"&&exports&&typeof module==="object"&&module&&module.exports===exports){a(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}}(function(h){var n=d();var l=86400;var t={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var w={init:function(A){return this.each(function(){var B=h(this);var E=[];for(var C in h.fn.timepicker.defaults){if(B.data(C)){E[C]=B.data(C)}}var D=h.extend({},h.fn.timepicker.defaults,E,A);if(D.lang){t=h.extend(t,D.lang)}D=g(D);B.data("timepicker-settings",D);B.addClass("ui-timepicker-input");if(D.useSelect){k(B)}else{B.prop("autocomplete","off");B.on("click.timepicker focus.timepicker",w.show);B.on("change.timepicker",f);B.on("keydown.timepicker",j);B.on("keyup.timepicker",z);f.call(B.get(0))}})},show:function(H){var C=h(this);var F=C.data("timepicker-settings");if(H){if(!F.showOnFocus){return true}H.preventDefault()}if(F.useSelect){C.data("timepicker-list").focus();return}if(r(C)){C.blur()}var G=C.data("timepicker-list");if(C.prop("readonly")){return}if(!G||G.length===0||typeof F.durationTime==="function"){k(C);G=C.data("timepicker-list")}if(q(G)){return}w.hide();G.show();var A={};if(F.orientation.match(/r/)){A.left=C.offset().left+C.outerWidth()-G.outerWidth()+parseInt(G.css("marginLeft").replace("px",""),10)}else{A.left=C.offset().left+parseInt(G.css("marginLeft").replace("px",""),10)}var B;if(F.orientation.match(/t/)){B="t"}else{if(F.orientation.match(/b/)){B="b"}else{if((C.offset().top+C.outerHeight(true)+G.outerHeight())>h(window).height()+h(window).scrollTop()){B="t"}else{B="b"}}}if(B=="t"){G.addClass("ui-timepicker-positioned-top");A.top=C.offset().top-G.outerHeight()+parseInt(G.css("marginTop").replace("px",""),10)}else{G.removeClass("ui-timepicker-positioned-top");A.top=C.offset().top+C.outerHeight()+parseInt(G.css("marginTop").replace("px",""),10)}G.offset(A);var E=G.find(".ui-timepicker-selected");if(!E.length){if(a(C)){E=e(C,G,p(a(C)))}else{if(F.scrollDefault){E=e(C,G,F.scrollDefault)}}}if(E&&E.length){var D=G.scrollTop()+E.position().top-E.outerHeight();G.scrollTop(D)}else{G.scrollTop(0)}h(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",o);if(F.closeOnWindowScroll){h(document).on("scroll.ui-timepicker",o)}C.trigger("showTimepicker");return this},hide:function(C){var A=h(this);var B=A.data("timepicker-settings");if(B&&B.useSelect){A.blur()}h(".ui-timepicker-wrapper").each(function(){var F=h(this);if(!q(F)){return}var D=F.data("timepicker-input");var E=D.data("timepicker-settings");if(E&&E.selectOnBlur){m(D)}F.hide();D.trigger("hideTimepicker")});return this},option:function(A,B){return this.each(function(){var C=h(this);var D=C.data("timepicker-settings");var E=C.data("timepicker-list");if(typeof A=="object"){D=h.extend(D,A)}else{if(typeof A=="string"&&typeof B!="undefined"){D[A]=B}else{if(typeof A=="string"){return D[A]}}}D=g(D);C.data("timepicker-settings",D);if(E){E.remove();C.data("timepicker-list",false)}if(D.useSelect){k(C)}})},getSecondsFromMidnight:function(){return p(a(this))},getTime:function(E){var A=this;var B=a(A);if(!B){return null}if(!E){E=new Date()}var D=p(B);var C=new Date(E);C.setHours(D/3600);C.setMinutes(D%3600/60);C.setSeconds(D%60);C.setMilliseconds(0);return C},setTime:function(C){var A=this;var B=A.data("timepicker-settings");if(B.forceRoundTime){var D=s(C,B)}else{var D=y(p(C),B)}c(A,D);if(A.data("timepicker-list")){u(A,A.data("timepicker-list"))}return this},remove:function(){var A=this;if(!A.hasClass("ui-timepicker-input")){return}var B=A.data("timepicker-settings");A.removeAttr("autocomplete","off");A.removeClass("ui-timepicker-input");A.removeData("timepicker-settings");A.off(".timepicker");if(A.data("timepicker-list")){A.data("timepicker-list").remove()}if(B.useSelect){A.show()}A.removeData("timepicker-list");return this}};function q(B){var A=B[0];return A.offsetWidth>0&&A.offsetHeight>0}function g(B){if(B.minTime){B.minTime=p(B.minTime)}if(B.maxTime){B.maxTime=p(B.maxTime)}if(B.durationTime&&typeof B.durationTime!=="function"){B.durationTime=p(B.durationTime)}if(B.scrollDefault=="now"){B.scrollDefault=p(new Date())}else{if(B.scrollDefault){B.scrollDefault=p(B.scrollDefault)}else{if(B.minTime){B.scrollDefault=B.minTime}}}if(B.scrollDefault){B.scrollDefault=v(B.scrollDefault,B)}if(h.type(B.timeFormat)==="string"&&B.timeFormat.match(/[gh]/)){B._twelveHourTime=true}if(B.disableTimeRanges.length>0){for(var A in B.disableTimeRanges){B.disableTimeRanges[A]=[p(B.disableTimeRanges[A][0]),p(B.disableTimeRanges[A][1])]}B.disableTimeRanges=B.disableTimeRanges.sort(function(D,C){return D[0]-C[0]});for(var A=B.disableTimeRanges.length-1;A>0;A--){if(B.disableTimeRanges[A][0]<=B.disableTimeRanges[A-1][1]){B.disableTimeRanges[A-1]=[Math.min(B.disableTimeRanges[A][0],B.disableTimeRanges[A-1][0]),Math.max(B.disableTimeRanges[A][1],B.disableTimeRanges[A-1][1])];B.disableTimeRanges.splice(A,1)}}}return B}function k(K){var S=K.data("timepicker-settings");var Q=K.data("timepicker-list");if(Q&&Q.length){Q.remove();K.data("timepicker-list",false)}if(S.useSelect){Q=h("<select />",{"class":"ui-timepicker-select"});var T=Q}else{Q=h("<ul />",{"class":"ui-timepicker-list"});var T=h("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});T.css({display:"none",position:"absolute"}).append(Q)}if(S.noneOption){if(S.noneOption===true){S.noneOption=(S.useSelect)?"Time...":"None"}if(h.isArray(S.noneOption)){for(var N in S.noneOption){if(parseInt(N,10)==N){var J=i(S.noneOption[N],S.useSelect);Q.append(J)}}}else{var J=i(S.noneOption,S.useSelect);Q.append(J)}}if(S.className){T.addClass(S.className)}if((S.minTime!==null||S.durationTime!==null)&&S.showDuration){var P=typeof S.step=="function"?"function":S.step;T.addClass("ui-timepicker-with-duration");T.addClass("ui-timepicker-step-"+S.step)}var R=S.minTime;if(typeof S.durationTime==="function"){R=p(S.durationTime())}else{if(S.durationTime!==null){R=S.durationTime}}var F=(S.minTime!==null)?S.minTime:0;var D=(S.maxTime!==null)?S.maxTime:(F+l-1);if(D<=F){D+=l}if(D===l-1&&h.type(S.timeFormat)==="string"&&S.show2400){D=l}var L=S.disableTimeRanges;var C=0;var O=L.length;var U=S.step;if(typeof U!="function"){U=function(){return S.step}}for(var N=F,M=0;N<=D;M++,N+=U(M)*60){var B=N;var H=y(B,S);if(S.useSelect){var G=h("<option />",{value:H});G.text(H)}else{var G=h("<li />");G.data("time",(B<=86400?B:B%86400));G.text(H)}if((S.minTime!==null||S.durationTime!==null)&&S.showDuration){var I=b(N-R,S.step);if(S.useSelect){G.text(G.text()+" ("+I+")")}else{var A=h("<span />",{"class":"ui-timepicker-duration"});A.text(" ("+I+")");G.append(A)}}if(C<O){if(B>=L[C][1]){C+=1}if(L[C]&&B>=L[C][0]&&B<L[C][1]){if(S.useSelect){G.prop("disabled",true)}else{G.addClass("ui-timepicker-disabled")}}}Q.append(G)}T.data("timepicker-input",K);K.data("timepicker-list",T);if(S.useSelect){if(K.val()){Q.val(s(K.val(),S))}Q.on("focus",function(){h(this).data("timepicker-input").trigger("showTimepicker")});Q.on("blur",function(){h(this).data("timepicker-input").trigger("hideTimepicker")});Q.on("change",function(){c(K,h(this).val(),"select")});c(K,Q.val());K.hide().after(Q)}else{var E=S.appendTo;if(typeof E==="string"){E=h(E)}else{if(typeof E==="function"){E=E(K)}}E.append(T);u(K,Q);Q.on("mousedown","li",function(V){K.off("focus.timepicker");K.on("focus.timepicker-ie-hack",function(){K.off("focus.timepicker-ie-hack");K.on("focus.timepicker",w.show)});if(!r(K)){K[0].focus()}Q.find("li").removeClass("ui-timepicker-selected");h(this).addClass("ui-timepicker-selected");if(m(K)){K.trigger("hideTimepicker");Q.on("mouseup.timepicker","li",function(W){Q.off("mouseup.timepicker");T.hide()})}})}}function i(E,C){var A,B,D;if(typeof E=="object"){A=E.label;B=E.className;D=E.value}else{if(typeof E=="string"){A=E}else{h.error("Invalid noneOption value")}}if(C){return h("<option />",{value:D,"class":B,text:A})}else{return h("<li />",{"class":B,text:A}).data("time",D)}}function v(C,A){if(!h.isNumeric(C)){C=p(C)}if(C===null){return null}else{var B=C%(A.step*60);if(B>=A.step*30){C+=(A.step*60)-B}else{C-=B}return C}}function s(B,A){B=v(B,A);if(B!==null){return y(B,A)}}function d(){return new Date(1970,1,1,0,0,0)}function o(C){var B=h(C.target);var A=B.closest(".ui-timepicker-input");if(A.length===0&&B.closest(".ui-timepicker-wrapper").length===0){w.hide();h(document).unbind(".ui-timepicker")}}function r(A){var B=A.data("timepicker-settings");return((window.navigator.msMaxTouchPoints||"ontouchstart" in document)&&B.disableTouchKeyboard)}function e(A,F,E){if(!E&&E!==0){return false}var C=A.data("timepicker-settings");var B=false;var D=C.step*30;F.find("li").each(function(G,I){var H=h(I);if(typeof H.data("time")!="number"){return}var J=H.data("time")-E;if(Math.abs(J)<D||J==D){B=H;return false}});return B}function u(B,E){E.find("li").removeClass("ui-timepicker-selected");var D=p(a(B),B.data("timepicker-settings"));if(D===null){return}var C=e(B,E,D);if(C){var A=C.offset().top-E.offset().top;if(A+C.outerHeight()>E.outerHeight()||A<0){E.scrollTop(E.scrollTop()+C.position().top-C.outerHeight())}C.addClass("ui-timepicker-selected")}}function f(F,C){if(this.value===""||C=="timepicker"){return}var B=h(this);if(B.is(":focus")&&(!F||F.type!="change")){return}var D=B.data("timepicker-settings");var H=p(this.value,D);if(H===null){B.trigger("timeFormatError");return}var A=false;if(D.minTime!==null&&H<D.minTime){A=true}else{if(D.maxTime!==null&&H>D.maxTime){A=true}}h.each(D.disableTimeRanges,function(){if(H>=this[0]&&H<this[1]){A=true;return false}});if(D.forceRoundTime){var G=H%(D.step*60);if(G>=D.step*30){H+=(D.step*60)-G}else{H-=G}}var E=y(H,D);if(A){if(c(B,E,"error")){B.trigger("timeRangeError")}}else{c(B,E)}}function a(A){if(A.is("input")){return A.val()}else{return A.data("ui-timepicker-value")}}function c(A,D,C){if(A.is("input")){A.val(D);var B=A.data("timepicker-settings");if(B.useSelect&&C!="select"){A.data("timepicker-list").val(s(D,B))}}if(A.data("ui-timepicker-value")!=D){A.data("ui-timepicker-value",D);if(C=="select"){A.trigger("selectTime").trigger("changeTime").trigger("change","timepicker")}else{if(C!="error"){A.trigger("changeTime")}}return true}else{A.trigger("selectTime");return false}}function j(D){var A=h(this);var C=A.data("timepicker-list");if(!C||!q(C)){if(D.keyCode==40){w.show.call(A.get(0));C=A.data("timepicker-list");if(!r(A)){A.focus()}}else{return true}}switch(D.keyCode){case 13:if(m(A)){w.hide.apply(this)}D.preventDefault();return false;case 38:var B=C.find(".ui-timepicker-selected");if(!B.length){C.find("li").each(function(E,F){if(h(F).position().top>0){B=h(F);return false}});B.addClass("ui-timepicker-selected")}else{if(!B.is(":first-child")){B.removeClass("ui-timepicker-selected");B.prev().addClass("ui-timepicker-selected");if(B.prev().position().top<B.outerHeight()){C.scrollTop(C.scrollTop()-B.outerHeight())}}}return false;case 40:B=C.find(".ui-timepicker-selected");if(B.length===0){C.find("li").each(function(E,F){if(h(F).position().top>0){B=h(F);return false}});B.addClass("ui-timepicker-selected")}else{if(!B.is(":last-child")){B.removeClass("ui-timepicker-selected");B.next().addClass("ui-timepicker-selected");if(B.next().position().top+2*B.outerHeight()>C.outerHeight()){C.scrollTop(C.scrollTop()+B.outerHeight())}}}return false;case 27:C.find("li").removeClass("ui-timepicker-selected");w.hide();break;case 9:w.hide();break;default:return true}}function z(C){var A=h(this);var B=A.data("timepicker-list");if(!B||!q(B)){return true}if(!A.data("timepicker-settings").typeaheadHighlight){B.find("li").removeClass("ui-timepicker-selected");return true}switch(C.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:u(A,B);break;default:return}}function m(A){var D=A.data("timepicker-settings");var E=A.data("timepicker-list");var C=null;var F=E.find(".ui-timepicker-selected");if(F.hasClass("ui-timepicker-disabled")){return false}if(F.length){C=F.data("time")}if(C!==null){if(typeof C=="string"){A.val(C);A.trigger("selectTime").trigger("changeTime").trigger("change","timepicker")}else{var B=y(C,D);c(A,B,"select")}}return true}function b(F,D){F=Math.abs(F);var B=Math.round(F/60),E=[],A,C;if(B<60){E=[B,t.mins]}else{A=Math.floor(B/60);C=B%60;if(D==30&&C==30){A+=t.decimal+5}E.push(A);E.push(A==1?t.hr:t.hrs);if(D!=30&&C){E.push(C);E.push(t.mins)}}return E.join(" ")}function y(H,E){if(H===null){return}var G=new Date(n.valueOf()+(H*1000));if(isNaN(G.getTime())){return}if(h.type(E.timeFormat)==="function"){return E.timeFormat(G)}var B="";var A,F;for(var D=0;D<E.timeFormat.length;D++){F=E.timeFormat.charAt(D);switch(F){case"a":B+=(G.getHours()>11)?t.pm:t.am;break;case"A":B+=(G.getHours()>11)?t.PM:t.AM;break;case"g":A=G.getHours()%12;B+=(A===0)?"12":A;break;case"G":A=G.getHours();if(H===l){A=24}B+=A;break;case"h":A=G.getHours()%12;if(A!==0&&A<10){A="0"+A}B+=(A===0)?"12":A;break;case"H":A=G.getHours();if(H===l){A=24}B+=(A>9)?A:"0"+A;break;case"i":var C=G.getMinutes();B+=(C>9)?C:"0"+C;break;case"s":H=G.getSeconds();B+=(H>9)?H:"0"+H;break;case"\\":D++;B+=format.charAt(D);break;default:B+=F}}return B}function p(B,E){if(B===""){return null}if(!B||B+0==B){return B}if(typeof(B)=="object"){return B.getHours()*3600+B.getMinutes()*60+B.getSeconds()}B=B.toLowerCase().replace(".","");if(B.slice(-1)=="a"||B.slice(-1)=="p"){B+="m"}var C="("+t.am.replace(".","")+"|"+t.pm.replace(".","")+"|"+t.AM.replace(".","")+"|"+t.PM.replace(".","")+")?";var H=new RegExp("^"+C+"\\s*([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?\\s*"+C+"$");var D=B.match(H);if(!D){return null}var G=parseInt(D[2]*1,10);var I=D[1]||D[5];var J=G;if(G<=12&&I){var A=(I==t.pm||I==t.PM);if(G==12){J=A?12:0}else{J=(G+(A?12:0))}}var F=(D[3]*1||0);var K=(D[4]*1||0);var M=J*3600+F*60+K;if(!I&&E&&E._twelveHourTime&&E.scrollDefault){var L=M-E.scrollDefault;if(L<0&&L>=l/-2){M=(M+(l/2))%l}}return M}function x(A){return("0"+A).slice(-2)}h.fn.timepicker=function(A){if(!this.length){return this}if(w[A]){if(!this.hasClass("ui-timepicker-input")){return this}return w[A].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof A==="object"||!A){return w.init.apply(this,arguments)}else{h.error("Method "+A+" does not exist on jQuery.timepicker")}}};h.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,showOnFocus:true,timeFormat:"G:i",scrollDefault:null,selectOnBlur:false,disableTouchKeyboard:false,forceRoundTime:false,appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:false,typeaheadHighlight:true,noneOption:false,show2400:false}}));